<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Datos desde Google Sheets</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    table { border-collapse: collapse; width: 100%; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; }
    th { background-color: #f0f0f0; }
  </style>
</head>
<body>
  <h1>Datos del prototipo</h1>
  <div id="loading">Cargando datosâ€¦</div>
  <table id="dataTable" style="display: none;"></table>

  <script>
    const sheetCSVUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSX9IUrV8oHTcY0xLufvuQEYb1EuwnJvF5pHHM5KnK46dQrmvfuSZsnzLHUyud0OmEyjSfbEFGrSjcj/pub?output=csv';

    async function fetchAndDisplayData() {
      try {
        const res = await fetch(sheetCSVUrl);
        const csvText = await res.text();
        const rows = csvText.trim().split('\n').map(row => row.split(','));

        const table = document.getElementById("dataTable");
        table.innerHTML = "";

        const headerRow = table.insertRow();
        rows[0].forEach(header => {
          const th = document.createElement("th");
          th.innerText = header;
          headerRow.appendChild(th);
        });

        rows.slice(1).forEach(dataRow => {
          const tr = table.insertRow();
          dataRow.forEach(cell => {
            const td = tr.insertCell();
            td.innerText = cell;
          });
        });

        document.getElementById("loading").style.display = "none";
        table.style.display = "";
      } catch (err) {
        document.getElementById("loading").innerText = "Error cargando los datos.";
        console.error("Error:", err);
      }
    }

    fetchAndDisplayData();
  </script>
</body>
</html>
